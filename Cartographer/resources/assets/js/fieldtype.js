!function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){Vue.component("cartographer-fieldtype",r(2))},function(e,t,r){var a,n,i={};a=r(3),n=r(7),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports.default);var o="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;n&&(o.template=n),o.computed||(o.computed={}),Object.keys(i).forEach(function(e){var t=i[e];o.computed[e]=function(){return t}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(4),n=r.n(a),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.default={mixins:[Fieldtype],props:["data","config","name"],data:function(){return{center:{},map:null,map_type_id:"roadmap",markers:[],markerObjects:[],selectedMarker:null}},attached:function(){var e=this;if("undefined"!=typeof google){var t=this.$els.mapContainer;this.center=this.data&&this.data.center||{lat:52.6318051,lng:1.296734},this.map_type_id=this.data&&this.data.map_typ_id||"roadmap",this.markers=this.data&&this.data.markers||[],this.map=new google.maps.Map(t,{center:this.center,fullscreenControl:!1,mapTypeId:this.map_type_id,streetViewControl:!1,zoom:3}),this.map.addListener("maptypeid_changed",this.handleMapTypeChange);var r=new google.maps.Marker({draggable:!0,map:this.map,position:this.center,label:"C"});["drag","dragend"].forEach(function(t){r.addListener(t,function(t){return e.handleMarkerDragged(t,"center",!0)})}),this.markers.length&&this.populateMarkers(this.markers)}},methods:{addMarker:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&(r={id:n()(),label:this.markers.length+1,position:this.map.getCenter().toJSON()});var a=r,i=a.id,o=a.label,s=a.position;t&&this.markers.push({id:i,position:s});var d=new google.maps.Marker({animation:google.maps.Animation.DROP,draggable:!0,map:this.map,position:s,id:i,label:o.toString()});["drag","dragend"].forEach(function(t){d.addListener(t,function(t){return e.handleMarkerDragged(t,i)})}),d.addListener("click",function(){return e.toggleSelectedMarker(i)}),this.markerObjects.push(d)},updateMarker:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.markers,n=a.findIndex(function(t){return t.id===e});if(n<0)return!1;a[n]=i({},a[n],t),r&&a.splice(n,1),this.data=i({},this.data,{markers:a})},removeMarker:function(e){this.selectedMarker=null,this.updateMarker(e,null,!0),this.markerObjects.filter(function(t){return t.id===e})[0].setMap(null)},toggleSelectedMarker:function(e){var t=this;this.selectedMarker=this.selectedMarker===e?null:e,this.markerObjects.forEach(function(e){e.id===t.selectedMarker?e.setAnimation(google.maps.Animation.BOUNCE):e.setAnimation(null)})},populateMarkers:function(e){var t=this;e.forEach(function(e,r){t.addMarker(!1,i({},e,{label:r+1}))})},handleMapTypeChange:function(){this.data=i({},this.data,{map_type_id:this.map.getMapTypeId()})},handleMarkerDragged:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[e.latLng.lat(),e.latLng.lng()],n=a[0],o=a[1];r?this.data=i({},this.data,{center:{lat:n,lng:o}}):this.updateMarker(t,{position:{lat:n,lng:o}})}}}},function(e,t,r){var a=r(5),n=r(6);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[i+s]=o[s];return t||n(o)}},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var a=new Uint8Array(16);e.exports=function(){return r(a),a}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},function(e,t){for(var r=[],a=0;a<256;++a)r[a]=(a+256).toString(16).substr(1);e.exports=function(e,t){var a=t||0,n=r;return[n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]]].join("")}},function(e,t){e.exports=' <section class=cartographer-field> <div class="btn-group my-1 mr-2"> <a href=# class="btn btn-default" @click.prevent=addMarker> Marker <i class="icon icon-plus icon-right"></i> </a> </div> <div v-if=selectedMarker class="btn-group my-1 mr-2"> <a href=# class="btn btn-danger" @click.prevent=removeMarker(selectedMarker)> Remove Marker <i class="icon icon-trash icon-right"></i> </a> </div> <div class=cartographer-field__map v-el:map-container></div> </section> '}]);